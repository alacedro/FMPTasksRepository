<h1>FMP2 Features</h1>

<p *ngIf="features.length < 1"><em>No features available</em></p>

<div>
    <label>Features list: </label>
    <select *ngIf="features.length >= 1" (change)="loadFeatureInfo($event.target.value)">
        <option *ngFor="let feature of features" value={{feature.featureId}}>
            {{feature.name}}
        </option>
    </select>
</div>

<div>
    <p>
        Active: <span *ngIf="activeFeature;else inactive_feature" class='glyphicon glyphicon-ok'></span>
        <ng-template #inactive_feature><span class='glyphicon glyphicon-remove'></span></ng-template>
    </p>
</div>

<label>Client list: </label>
<div style="max-height:300px; min-height:300px; overflow:auto" class="well">
    <table class='table table-striped table-bordered table-hover table-condensed table-fixed' *ngIf="featureClients" id="featureClientTable">
        <thead>
            <tr>
                <th class="col-xs-8">Client</th>
                <th class="col-xs-2">Active</th>
                <th class="col-xs-2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let featureClient of featureClients">
                <td class="col-xs-8">{{ featureClient.companyName }}</td>
                <td class="col-xs-2">
                    <span *ngIf="featureClient.active;else inactive_feature" class='glyphicon glyphicon-ok'></span>
                    <ng-template #inactive_feature><span class='glyphicon glyphicon-remove'></span></ng-template>
                </td>
                <td class="col-xs-2">
                    <span *ngIf="featureClient.active;else inactive_feature_button" >
                        <button type="button" class="btn btn-default" (click)="deactivateFeatureForClient(featureClient.clientId)">Deactivate</button>
                    </span>
                    <ng-template #inactive_feature_button><span ><button type="button" class="btn btn-default" (click)="activateFeatureForClient(featureClient.clientId)">Activate</button></span></ng-template>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>
    <button class="btn" (click)="showAddClientPopUp()">Add client</button>
</p>

<div *ngIf="addClientPopUpVisible" class="modal fade show in" id="myModal" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="hideAddClientPopUp()">&times;</button>
                <h4 class="modal-title">Add client to feature</h4>
            </div>
            <div class="modal-body">
                <label>Available client list: </label>
                <p *ngIf="availableClients.length < 1"><em>No clients available</em></p>
                <select *ngIf="availableClients.length >= 1" (change)="changeSelectedAvailableClientId($event.target.value)">
                    <option *ngFor="let client of availableClients" value={{client.clientId}}>
                        {{client.companyName}}
                    </option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" (click)="addClientToFeature()">Add</button>
                <button type="button" class="btn btn-default" (click)="hideAddClientPopUp()">Cancel</button>
            </div>
        </div>
    </div>
</div>

